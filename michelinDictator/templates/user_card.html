{% extends 'base.html' %}

{% block content %}
<style>
   .central_container {
    text-align:  center;
   }
   textarea {
       overflow-y: scroll;
       width: 50%; /* Ширина поля в процентах */
       height: 200px; /* Высота поля в пикселах */
       resize: vertical; /* Запрещаем изменять размер */
      }
    TD {
        border: 1px solid #333; /* Граница вокруг ячеек */
        padding: 5px;
    }

    .btn{
        background-color: #ffffff; 
        color: #333;
        
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        border-radius: 8px;
        border: 1px solid #d9d9d9;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
      }
    .btn:hover {
        background-color: #fd0202;
        color: #fff;
    }
    :root {
        --dark: #1b1e2c;
    }
    .form-group input {
        display: none;
    }
    .form-group.select-all label {
        font-size: 20px;
        font-weight: 500;
        margin-bottom: 24px;
        margin: auto;
    }
    label {
        display: flex;
        align-items: center;
        grid-gap: 16px;
        cursor: pointer;
    }
    label .checkbox {
        width: 20px;
        height: 20px;
        background: #ccc;
        border-radius: 4px;
        position: relative;
        transition: .2s ease;
        transition-delay: .2s;
    }
    label .checkbox::before {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        right: 2px;
        bottom: 2px;
        background: #fff;
        border-radius: 2.5px;
        transition: .2s ease;
        transition-delay: .2s;
    }
    .form-group input:checked + label .checkbox::before {
        top: 10px;
        left: 10px;
        right: 10px;
        bottom: 10px;
        border-radius: 50%;
        transition-delay: 0s;
    }
    .form-group input:checked + label .checkbox {
        background: var(--dark);
        transition-delay: 0s;
    }
    label .checkbox .check {
        display: block;
        width: 12px;
        height: 6px;
        position: absolute;
        top: 6px;
        left: 50%;
        transform: translateX(-50%) rotateZ(-45deg);
    }
    label .checkbox .check::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 2px;
        height: 0;
        background: #fff;
        transition: .2s ease;
        transition-delay: .2s;
    }
    label .checkbox .check::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 2px;
        background: #fff;
        transition: .2s ease;
        transition-delay: 0s;
    }
    .form-group input:checked + label .checkbox .check::before {
        height: 100%;
        transition-delay: .2s;
    }
    .form-group input:checked + label .checkbox .check::after {
        width: 100%;
        transition-delay: .4s;
    }

  </style>
<br><br><br>
<br>
<br>
 {% if request.user.is_authenticated and card.user == request.user %}
<h2 style="text-align: center;">{{ card.name }} </h2>
   <div class="main_container">
       <div class="top_bar"></div>
       <div class="central_container">
           <div class="rules_container">
               <h2 style="text-align: center;"> В поле ниже записаны правила, которых Вам следует придерживаться при записи</h2>
               <div class="rules_text">
                   <textarea name="comment" cols="100" rows="10" disabled id="output_client_rules">{{ card.instruction }}</textarea>
               </div>
           </div>
           <div class="text_conteiner">
               <h2 style="text-align: center;"> Ниже написано содержимое файла, который надо прочитать!</h2>
               <div class="file_content">
                   <textarea name="comment" cols="100" rows="10" disabled id="output_client_text">{{ card.text }}</textarea>
               </div>
           </div>


           </div>
       </div>

<div style="padding: 10px;">
<table style="margin: auto; border: 1px solid black">
    <tr>
        <td>
        <div class="form-group select-all">
			<input type="checkbox" id="select-all">
			<label for="select-all">
				<span class="checkbox">
					<span class="check"></span>
				</span>
			</label>
		</div>
        </td>
        <td style="text-align: center;">ID</td>
        <td style="text-align: center;">Имя пользователя</td>
        <td style="text-align: center;">Аудио файл</td>
    </tr>
    {% for audio in audios %}
    <tr>
        <td>
        <div class="form-group">
			<input type="checkbox" id="web-developer">
			<label for="web-developer">
				<span class="checkbox">
					<span class="check"></span>
				</span>
			</label>
		</div>
        </td>
        <td style="text-align: center;">{{ audio.id }}</td>
        <td style="text-align: center;"> {{ audio.user }}</td>
        <td> <audio src ="{{ audio.file_path.url }}" controls></audio> </td>
    </tr>
    {% endfor %}


<div style="padding: 10px; margin: auto; width: 552px;">
    <div style="padding: 5px; float: left;">
    <form method="post" name="delete">
        {% csrf_token %}
    <input type="hidden" name="name" value="delete">
        <button type="submit"  class="btn">Удалить карточку</button>
    </div>
    <div style="padding: 5px; float: right;">
    </form>
    <form method="post" name="download">
        {% csrf_token %}
    <input type="hidden" name="name" value="download">
        <button type="submit"  class="btn">Скачать все</button>
    </div>
    <div style="padding: 5px; float: right;">
    </form>
    <form method="post" name="download">
        {% csrf_token %}
    <input type="hidden" name="name" value="download">
        <button type="submit"  class="btn">Удалить все</button>
    </form>
    </div>

</div>
{% else %}
<h1>Это не ваша карта</h1>
{% endif %}
        <script>
    const selectAll = document.querySelector('.form-group.select-all input');
		const allCheckbox = document.querySelectorAll('.form-group:not(.select-all) input');
		let listBoolean = [];

		allCheckbox.forEach(item=> {
			item.addEventListener('change', function () {
				allCheckbox.forEach(i=> {
					listBoolean.push(i.checked);
				})
				if(listBoolean.includes(false)) {
					selectAll.checked = false;
				} else {
					selectAll.checked = true;
				}
				listBoolean = []
			})
		})

		selectAll.addEventListener('change', function () {
			if(this.checked) {
				allCheckbox.forEach(i=> {
					i.checked = true;
				})
			} else {
				allCheckbox.forEach(i=> {
					i.checked = false;
				})
			}
		})
</script>


   {% endblock %}

